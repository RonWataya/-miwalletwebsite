<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OmniPOS  Know Your Business. Control Your Money.</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="img/favicon.png">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="css/omnipos.css" rel="stylesheet">
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top custom-navbar">
  <div class="container">
    <a class="navbar-brand fw-bold d-flex align-items-center" href="index">
      <img src="img/Miwallet.webp" alt="Mi Wallet LTD Logo" class="me-3">
    </a>

    <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
        <li class="nav-item"><a class="nav-link" href="index">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="omnipos">OmniPOS</a></li>
        <li class="nav-item"><a class="nav-link active" href="expired">Credit</a></li>
        <li class="nav-item"><a class="nav-link" href="mpay">Mi Wallet Pay</a></li>
        <li class="nav-item"><a class="nav-link" href="about">About Us</a></li>
        <li class="nav-item"><a class="nav-link" href="contact">Contact</a></li>
        <li class="nav-item"><a class="nav-link" href="downloads">Downloads</a></li>
        <li class="nav-item ms-lg-3 mt-3 mt-lg-0">
          <a href="contact" class="btn btn-primary px-4 py-2 rounded-pill fw-600 shadow-sm">
            Get Started
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- HERO -->
<header class="hero-section d-flex align-items-center">
  <div class="container text-center">
    <h1 class="hero-title mb-4">
      You are here because your subscription may have expired.<br>
     
    </h1>

  

    <div class="d-flex flex-wrap justify-content-center gap-3 mb-5">
        <span class="badge bg-white text-dark p-2 px-3 shadow-sm rounded-pill">üì± Works on any Phone</span>
        <span class="badge bg-white text-dark p-2 px-3 shadow-sm rounded-pill">üîå Works Without Internet</span>
        <span class="badge bg-white text-dark p-2 px-3 shadow-sm rounded-pill">üõ°Ô∏è Secure Data Backup</span>
    </div>

    <div class="cta-btns">
        <a href="#pricing" class="btn btn-primary btn-lg rounded-pill shadow-lg px-5 me-sm-3 mb-3 mb-sm-0">
          View Pricing Plans
        </a>
        <a href="#check-status" class="btn btn-outline-primary btn-lg rounded-pill shadow-sm px-5 mb-3 mb-sm-0 bg-white">
          Renew Subscription
        </a>
    </div>
  </div>
</header>

<section id="check-status" class="py-6 bg-white">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow-lg border-0 rounded-4 p-4">
          <h3 class="fw-bold text-center mb-4">Check Subscription Status</h3>
          
          <div id="login-form">
            <div class="mb-3">
              <label class="form-label">Email or Phone</label>
              <input type="text" id="userLogin" class="form-control form-control-lg" placeholder="Enter your app login">
            </div>
           <button onclick="checkStatus()" id="btnCheck" class="btn btn-primary w-100 py-3 rounded-pill fw-bold">
                            Check Status
                        </button>
          </div>

          <div id="status-result" class="d-none mt-4 text-center">
            <h4 id="resName" class="fw-bold"></h4>
            <div id="statusBadge" class="badge p-2 mb-3"></div>
            <p id="expiryMsg" class="text-muted"></p>
            
            <hr>
            
            <div class="payment-instructions p-4 bg-light rounded-4 text-start">
              <h6 class="fw-bold mb-3"><i class="bi bi-wallet2 me-2"></i>How to Pay / Renew</h6>
              
              <div class="alert alert-info border-0 shadow-sm py-2 mb-3">
                 <p class="small mb-0"><strong>Standard Fee:</strong> MWK MWK 6,600 / month for <strong>MiWallet Credit</strong></p>
                 <p class="small mb-0 text-muted">For OmniPOS Standard or Pro, refer to the pricing section below.</p>
              </div>

              <p class="small mb-2">To activate your 30-day access, please send payment via Mobile Money:</p>
              
              <div class="d-flex justify-content-between align-items-center mb-2 bg-white p-2 rounded border">
                <span class="fw-bold">Airtel Money / Mpamba</span>
                
              </div>

              <div class="p-2 bg-warning bg-opacity-10 rounded border border-warning border-opacity-25 mb-3">
                <p class="small mb-0"><strong>Reference:</strong> Use your registered Phone Number so we can find your account.</p>
              </div>

              <p class="small text-center mt-3 mb-0">
                <strong>Need Help?</strong><br>
                <a href="mailto:support@miwalletmw.com" class="text-decoration-none">support@miwalletmw.com</a> or call <strong>0991448707</strong>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- WHY OMNIPOS -->
<section id="why" class="py-6">
  <div class="container">
    <h2 class="text-center fw-bold mb-2 section-title">
      One Product, Endless Solutions
    </h2>
    <p class="text-center text-muted mb-5 section-subtitle">
      Whether you sell soap or lend capital, MiWallet Credit keeps your money safe.
    </p>

    <div class="row g-4">
      <div class="col-md-6 col-lg-3">
        <div class="feature-card h-100 p-4 rounded-3 text-center border">
          <div class="feature-icon mb-3">üè™</div>
          <h5 class="fw-bold">Grocery Stores</h5>
          <p class="small text-muted">Stop using old notebooks. Record "Banja" (credits) instantly and never forget who owes you for sugar or soap again.</p>
        </div>
      </div>

      <div class="col-md-6 col-lg-3">
        <div class="feature-card h-100 p-4 rounded-3 text-center border">
          <div class="feature-icon mb-3">üí∞</div>
          <h5 class="fw-bold">Money Lenders</h5>
          <p class="small text-muted">Track loans, interest, and partial payments. MiWallet Credit automatically applies payments to the oldest debt first.</p>
        </div>
      </div>

      <div class="col-md-6 col-lg-3">
        <div class="feature-card h-100 p-4 rounded-3 text-center border">
          <div class="feature-icon mb-3">üë§</div>
          <h5 class="fw-bold">Individuals</h5>
          <p class="small text-muted">Lent money to a friend or relative? Keep a professional record so you can get paid back without the "I forgot" excuses.</p>
        </div>
      </div>

      <div class="col-md-6 col-lg-3">
        <div class="feature-card h-100 p-4 rounded-3 text-center border">
          <div class="feature-icon mb-3">üè¢</div>
          <h5 class="fw-bold">Companies</h5>
          <p class="small text-muted">Manage staff advances and petty cash. Generate clear financial statements and projections with one click.</p>
        </div>
      </div>
    </div>
  </div>
</section>





<!-- FEATURES -->
<section id="features" class="py-6 bg-white">
  <div class="container">
    <h2 class="text-center fw-bold mb-2 section-title">How MiWallet Credit Works For You</h2>
    <p class="text-center text-muted mb-5 section-subtitle">
      It‚Äôs like having a digital assistant that never sleeps and never makes mistakes.
    </p>

    <div class="row g-4">
      <div class="col-md-6 col-lg-4">
        <div class="feature-box h-100 p-5 rounded-4 bg-light border-0 shadow-sm transition-up">
          <div class="mb-4 text-primary fs-1">ü§ù</div>
          <h5 class="fw-bold mb-3">Clear Old Debts First</h5>
          <p class="text-muted mb-0 lh-lg">
            If a customer owes you for sugar from last week and soap from today, their payment automatically pays off the sugar first. Your books stay clean without you doing any math.
          </p>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="feature-box h-100 p-5 rounded-4 bg-light border-0 shadow-sm transition-up">
          <div class="mb-4 text-primary fs-1">ü™ô</div>
          <h5 class="fw-bold mb-3">Small Payments Allowed</h5>
          <p class="text-muted mb-0 lh-lg">
            Customers don‚Äôt always have the full amount. Record even the smallest "ka-small" payment, and the app will instantly show them exactly how much they still owe.
          </p>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="feature-box h-100 p-5 rounded-4 bg-light border-0 shadow-sm transition-up">
          <div class="mb-4 text-primary fs-1">üì±</div>
          <h5 class="fw-bold mb-3">Lose Your Phone, Not Your Money</h5>
          <p class="text-muted mb-0 lh-lg">
            A notebook can burn or get lost. If your phone breaks, just log in on a new one and all your customers and their debts will appear exactly as they were.
          </p>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="feature-box h-100 p-5 rounded-4 bg-light border-0 shadow-sm transition-up">
          <div class="mb-4 text-primary fs-1">üìµ</div>
          <h5 class="fw-bold mb-3">Works Without Internet</h5>
          <p class="text-muted mb-0 lh-lg">
            Network problems? No problem. Record credits and payments anywhere‚Äîeven in the village. The app saves everything and updates once you have a signal.
          </p>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="feature-box h-100 p-5 rounded-4 bg-light border-0 shadow-sm transition-up">
          <div class="mb-4 text-primary fs-1">üìñ</div>
          <h5 class="fw-bold mb-3">No More Arguments</h5>
          <p class="text-muted mb-0 lh-lg">
            Show customers a clear list of every time they took credit and every time they paid. It builds trust and stops "I already paid that" excuses.
          </p>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="feature-box h-100 p-5 rounded-4 bg-light border-0 shadow-sm transition-up">
          <div class="mb-4 text-primary fs-1">üìà</div>
          <h5 class="fw-bold mb-3">See Your Total Investment</h5>
          <p class="text-muted mb-0 lh-lg">
            Instantly see how much money you have put into your business, the value of stock on your shelves, and how much is still "outside" in debts.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- PRICING -->
<section id="pricing" class="py-6 bg-light-subtle">
  <div class="container">
    <h2 class="text-center fw-bold mb-2">Start Small, Grow Big</h2>
    <p class="text-center text-muted mb-5">Pick the plan that fits your business size today.</p>

    <div class="row g-4 justify-content-center">
      
      <div class="col-md-6 col-lg-4">
        <div class="pricing-card h-100 p-0 rounded-4 overflow-hidden bg-white border border-primary border-opacity-25 shadow-sm">
          <div class="pricing-header bg-primary text-white p-4 text-center">
            <h4 class="mb-0 fw-bold">MiWallet Credit</h4>
            <p class="small mb-0 opacity-75">For Lenders & Small Shops</p>
          </div>
          <div class="pricing-body p-5">
            <div class="text-center mb-4">
              <h2 class="fw-bold mb-0">MWK MWK 6,600</h2>
              <span class="text-muted">Per Month</span>
            </div>
            <ul class="list-unstyled mb-5">
              <li class="mb-3">‚ú® <strong>Track All Debts & Loans</strong></li>
              <li class="mb-3">‚ú® Automatic "Oldest Debt" clearing</li>
              <li class="mb-3">‚ú® Save unlimited customer names</li>
              <li class="mb-3">‚ú® Works 100% Offline</li>
              <li class="mb-3">‚ú® Total Investment Reports</li>
            </ul>
            <a href="#check-status" class="btn btn-outline-primary w-100 py-3 fw-bold rounded-pill">Start Tracking Now</a>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="pricing-card h-100 p-0 rounded-4 overflow-hidden bg-white border border-light shadow-sm">
          <div class="pricing-header bg-dark text-white p-4 text-center">
            <h4 class="mb-0 fw-bold">OmniPOS Standard</h4>
            <p class="small mb-0">Full Shop Management</p>
          </div>
          <div class="pricing-body p-5">
            <div class="text-center mb-4">
              <h2 class="fw-bold mb-0">MWK 65,000</h2>
              <span class="text-muted">Per Month</span>
            </div>
            <ul class="list-unstyled mb-5">
              <li class="mb-3">‚úÖ <strong>All Credit Features included</strong></li>
              <li class="mb-3">‚úÖ Inventory (Stock) Tracking</li>
              <li class="mb-3">‚úÖ Daily Sales Reports</li>
              <li class="mb-3">‚úÖ Barcode Scanning</li>
              <li class="mb-3">‚úÖ Expired Product Alerts</li>
            </ul>
            <a href="#check-status" class="btn btn-dark w-100 py-3 fw-bold rounded-pill">Get Full POS</a>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta-section py-6 text-center bg-primary text-white">
  <div class="container">
    <h2 class="fw-bold mb-3 display-6">Is Your Money Safe?</h2>
    <p class="lead mb-5 opacity-90 mx-auto" style="max-width: 700px;">
      Stop guessing how much money you made today. Join thousands of Malawian business owners who use MiWallet to protect their hard-earned cash.
    </p>
    <a href="downloads" target="_blank"
       class="btn btn-light btn-lg px-5 py-3 fw-bold rounded-pill shadow-lg text-primary">
      Start Your 30-Day Sub Today
    </a>
  </div>
</section>

<!-- FOOTER -->
<footer class="bg-dark text-white-50 py-5">
  <div class="container">
    <div class="text-center">
      <p class="mb-2 text-white">&copy; 2025 Mi Wallet LTD. All Rights Reserved.</p>
      <p class="mb-0">
        <a href="privacy" class="text-white-50 text-decoration-none hover-link">Privacy Policy</a>
      </p>
      <p class="mb-0"><a href="terms" class="text-white-50">Terms of Service</a></p>
    </div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// 1. AUTO-TRIGGER ON PAGE LOAD
window.onload = function() {
    const params = new URLSearchParams(window.location.search);
    const uuidFromApp = params.get('uuid'); 
    
    if (uuidFromApp) {
        // Put the UUID in the box so the user sees it
        document.getElementById('userLogin').value = uuidFromApp;
        
        // AUTO-CHECK: Wait 300ms for the page to settle, then fire the request
        setTimeout(() => {
            checkStatus(uuidFromApp); 
        }, 300);
    }
};

// 2. THE CHECK FUNCTION
async function checkStatus(autoUuid = null) {
    const userInput = autoUuid ? autoUuid : document.getElementById('userLogin').value;
    
    if(!userInput) return alert("Please enter your phone or email");

    const btn = document.getElementById('btnCheck');
    btn.disabled = true;
    btn.innerText = "Checking...";

    // --- SMART BRIDGE LOGIC ---
    // If you're on the emulator, hostname is '10.0.2.2'. On PC, it's 'localhost'.
    const serverHost = window.location.hostname === "10.0.2.2" ? "10.0.2.2" : "localhost";
    const apiUrl = "/api/app/web-status";

    try {
        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ login: userInput }) 
        });

        if (!response.ok) throw new Error('Server unreachable');

        const data = await response.json();

        if(data.success) {
            // THE "AUTOMATIC OPEN" PART: Hide the search, show the result
            document.getElementById('login-form').classList.add('d-none');
            document.getElementById('status-result').classList.remove('d-none');
            
            document.getElementById('resName').innerText = "Hello, " + data.name;
            const badge = document.getElementById('statusBadge');
            badge.innerText = data.status.toUpperCase();
            
            // Set colors and messages based on status
            if(data.status === 'expired') {
                badge.className = "badge bg-danger p-2 mb-3";
                document.getElementById('expiryMsg').innerText = "Your subscription has ended. Access is locked.";
            } else {
                badge.className = "badge bg-success p-2 mb-3";
                document.getElementById('expiryMsg').innerText = "Your account is active until: " + (data.expiryDate || "N/A");
            }
        } else {
            // Only alert if the user typed manually. Don't annoy them if auto-load fails.
            if(!autoUuid) alert("User not found. Please use your registered phone number.");
        }
    } catch (e) {
        console.error("Connection Error:", e);
        if(!autoUuid) alert("Connection Error. Is your Node.js server running on port 10000?");
    } finally {
        btn.disabled = false;
        btn.innerText = "Check Status";
    }
}
</script>
</body>
</html>
